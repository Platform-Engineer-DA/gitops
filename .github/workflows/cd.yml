name: Workflow GitOp CD

on: [push]

env:
  TAG_VERSION: "dev_${{ github.run_id }}"
  PROJECT_NAME: "gitops"

jobs: 

    CD:        
        runs-on: ubuntu-latest
        permissions:
          contents: read

        steps:
        - name: Checkout
          uses: actions/checkout@v2

        - name: ArgoCD Project Sync
          uses: Platform-Engineer-DA/central-ci-cd/.github/actions/cd/argocd/oci_deploy@main
          with:
            OCI_TENANCY_OCID:   ${{ secrets.OCI_TENANCY_OCID }}
            OCI_USER_OCID:      ${{ secrets.OCI_USER_OCID }}
            OCI_FINGERPINRT:    ${{ secrets.OCI_FINGERPRINT }}
            OCI_REGION:         ${{ secrets.OCI_REGION }}
            OCI_PRIVATE_KEY_B64: ${{ secrets.OCI_PRIVATE_KEY_B64 }}
            OKE_CLUSTER_OCID:   ${{ secrets.OKE_CLUSTER_OCID }}
            