name: Continous Integration Workflow

on: [push]

jobs: 
    CI:
        runs-on: ubuntu-latest
        steps:
        - name: Checkout
          uses: actions/checkout@v2

        - name: Setup Go
          uses: Platform-Engineer-DA/central-ci-cd/.github/actions/ci/golang/setup@main

        - name: Unit Test
          uses: Platform-Engineer-DA/central-ci-cd/.github/actions/ci/golang/test@main

    CD:
        runs-on: ubuntu-latest
        needs: CI
        steps:
        - name: Checkout
          uses: actions/checkout@v2

        - name: Setup Go
          uses: Platform-Engineer-DA/central-ci-cd/.github/actions/cd/golang/setup@main

        - name: Build
          uses: Platform-Engineer-DA/central-ci-cd/.github/actions/cd/golang/build@main

        - name: Deploy
          uses: Platform-Engineer-DA/central-ci-cd/.github/actions/cd/golang/deploy@main